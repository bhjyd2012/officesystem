<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8" isELIgnored="false"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Gross数据展示</title>
   <link rel="stylesheet" href="${pageContext.request.contextPath}/static/css/common.css">
   <link rel="stylesheet" href="${pageContext.request.contextPath}/static/css/main.css">
   <script type="text/javascript" src="${pageContext.request.contextPath}/static/js/jquery-3.4.1.min.js"></script>
   <script type="text/javascript" src="${pageContext.request.contextPath}/static/js/colResizable-1.3.min.js"></script>
   <script type="text/javascript" src="${pageContext.request.contextPath}/static/js/common.js"></script>
   <script type="text/javascript">
   	  //跳转页码  
	  function goPage(pageIndex) {
		  var pageSize=$("#pageNumber").val();// 新的页面大小
		//attr,修改属性
		$("#grossForm").attr("action","${pageContext.request.contextPath}/gross/showList/"+pageIndex+"/"+pageSize);
		$("#grossForm").submit();//提交表单,把参数也提交
	  }
	//输入页码跳转指定页 
	function tiaoPage(){
		var number=$("#number").val();// 要跳转的页码
		if (number!="") {
			//正则表达式判断
			var pattern = /^[0-9]*$/;
			var b = pattern.test($.trim(number));
			if(b==true){
				if(number=>1&&number<=${pager.pageIndex}){
				goPage($.trim(number));
				}
			}
		} else{
			alert("跳转页码不能为空！");
		}
		
	}
	//动态修改页面大小
	function chagePageSize(pageIndex){
		var pageSize=$("#pageNumber").val();// 新的页面大小
		$("#grossForm").attr("action","${pageContext.request.contextPath}/gross/showList/"+pageIndex+"/"+pageSize);
		$("#grossForm").submit();//提交表单,把参数也提交
	}
	
	/*全选不全选 */
  	function allbox(){
	  var flag=document.getElementById("allboxs").checked;
      var cks=document.getElementsByName("onebox");
      for(var i=0;i<cks.length;i++){
          cks[i].checked=flag;
      }
	}
  	
  	/*清空搜索框*/
	function clearInfo(){
		if(confirm("是否清空搜索条件？")){
			//获取搜索框对象
			var title = $("[name='title']");
			var startDate = $("[name='startDate']");
			var endDate = $("[name='endDate']");
			//为搜索框置空
			title.val("");
			startDate.val("");
			endDate.val("");
			//跳转查询请求
			window.location.href="/gross/showList/1/10";
		}
		 
	}
   </script>
</head>
<body>

     <div id="search_bar" class="mt10">
       <div class="box">
          <div class="box_border">
            <div style="font-size:16px;margin-top: 20px;" align="center"><b>Gross数据展示</b></div>
        <form action="${pageContext.request.contextPath}/gross/showList/1/10" method="post" id="grossForm">    
            <div class="box_center pt10 pb10">
              <table class="form_table" border="0" cellpadding="0" cellspacing="0" style="margin: auto;">
                <tr>
                  <!--<td>标题</td>-->
                  <td>
                  <input type="text" name="title" class="input-text lh25" size="60" placeholder="输入搜索条件(餐厅名称)" value="${query.title}"/>
                  </td>                
                  <td>时间</td>
                  <td>
                       <input type="text" name="startDate" class="input-text lh25" size="20" placeholder="开始时间（2019/7/28）" value="${query.startDate}"/>
                       	至
                       <input type="text" name="endDate" class="input-text lh25" size="20" placeholder="结束时间（2019/7/28）" value="${query.endDate}"/>
                  </td>
                  <td>
                  <input type="submit" name="button" class="btn btn82 btn_search" value="查询">
			      <input type="button" name="qingkong" class="btn btn82 btn_recycle" value="清空" onclick="clearInfo()"/>
			      <input type="button" name="alldelete" class="btn btn82 btn_del" value="删除" onclick="delall()"/>
			      </td>
                </tr>
               
              </table>
            </div>
        </form>
             <div  class="box_bottom pb5 pt5 pr10" style="border-top:1px solid #dadada;">
              <div class="search_bar_btn" style="text-align:center;" >
                 <a href="${pageContext.request.contextPath}/templates/uploadExcel.jsp" class="ext_btn"><span class="add"></span>添加数据</a>
                 <a href="${pageContext.request.contextPath}/templates/uploadExcel.jsp" class="ext_btn"><span class="add"></span>导入数据</a>
              </div>
            </div>
			</div>  
       </div>
    </div>   


 <div id="table" class="mt10">
        <div class="box span10 oh">
        <form method="post">
              <table width="100%" border="0" cellpadding="0" cellspacing="0" class="list_table">
                <tr>
				   <th>
				   <input type="checkbox" id="allboxs" onclick="allbox()"/>
				   </th>
                   <th>编号</th>
                   <th>经理</th>
                   <th>督导</th>
                   <th>餐厅编号</th>
                   <th>餐厅名称</th>
                   <th>日期</th>
				   <th>收入类型</th>
				   <th>TC</th>
				    <th>营业额</th>
                   <th>物料成本</th>
                   <th>毛利</th>
                   <th>毛利率</th>
				   <th>上周同比营业额</th>
				   <th>上周同比毛利</th>
				   <th>上周同比毛利率</th>
				   <!--<th>状态</th>-->
				   <th>操作</th>
                 </tr>
                <c:forEach items="${pager.records}" var="gross">
					<tr class="tr" align="center">
						<td class="td_center"><input type="checkbox" name="onebox" value="${gross.id}"></td>
						<td>${gross.id}</td>
						<td>${gross.manager}</td>
						<td>${gross.supervisor}</td>
						<td>${gross.restaurantNum}</td>
						<td>${gross.restaurantName}</td>
						<td>
						  <fmt:formatDate value="${gross.date}" pattern="yyyy-MM-dd"/>
						</td>
						<td>${gross.incomeType}</td>
						<td>${gross.tc}</td>
						<td>${gross.turnover}</td>
						<td>${gross.materialCost}</td>
						<td>${gross.grossProfit}</td>
						<td>${gross.grossRate}</td>
						<td>${gross.lwturnover}</td>
						<td>${gross.lwgrossProfit}</td>
						<td>${gross.lwgrossRate}</td>
						
						<!--<td id="td_${h.id}">${h.state==1?"启用":"禁用"}</td>-->
						<td>
						<!--<a id="a_${h.id}" href="javascript:chageSate(${h.id});">${h.state==0?"启用":"禁用"}</a> |&nbsp;--> 
						<a href="${pageContext.request.contextPath}/house/getOneHouseInfo?id=${gross.id}">编辑</a>|&nbsp; 
						<%-- <a href="/house/deleteOneHouseInfo?id=${h.id}" onclick="del()">删除</a> --%>
						<a href="javascript:void(0)" onclick="del(${gross.id})">删除</a>
						</td>
					</tr>
				</c:forEach>
				 
               <tr>
               	<td colspan="6"></td>
			    
				<td colspan="6" align="center">
				     <div class="page mt10">
						<div class="pagination">
						
						  <ul >
							  <li class="first-child"><a href="javascript:goPage(1);">首页</a></li>
							  <c:if test="${pager.pageIndex>1}">
							  <li><a href="javascript:goPage(${pager.pageIndex-1});">上一页</a></li>
							  </c:if>
							  <!-- 展示页数 -->
							  <c:forEach items="${pager.numbers}" var="num">
							     <!-- 判断是当前页码，文字展示为红色 -->
							     <c:if test="${num==pager.pageIndex}">
							     	<li class="active"><span style="color: red;">${num}</span></li>
							     </c:if>
							     <!-- 判断是不是当前页码，文字展示为灰色 -->
							    <c:if test="${num!=pager.pageIndex}">
							      <li><a href="javascript:goPage(${num});">${num}</a></li>
							    </c:if>
							  </c:forEach>
							  <c:if test="${pager.pageIndex<pager.pageCount}">
							  <li><a href="javascript:goPage(${pager.pageIndex+1});">下一页</a></li>
							  </c:if>
							  <li><a href="javascript:goPage(${pager.pageCount});">末页</a></li>
						      <li><span>共${pager.totalCount}条数据</span></li>
			     			  <li><span>共${pager.pageCount}页</span></li>
			     			  <li>
			     			  	<input type="button" name="button" class="btn btn82 btn_del" value="GO" onclick="tiaoPage(${pager.pageCount})">
				         		<input type="text" name="number" class="input-text lh25" size="4" id="number">
			     			  </li>
			     			  <li>
								每页<select id="pageNumber" onchange="chagePageSize(${pager.pageIndex});">
									   <option value="5" ${pager.pageSize==5?"selected":""}>5</option>
									   <option value="10" ${pager.pageSize==10?"selected":""}>10</option>
									   <option value="15" ${pager.pageSize==15?"selected":""}>15</option>
									   <option value="20" ${pager.pageSize==20?"selected":""}>20</option>
									   <option value="30" ${pager.pageSize==30?"selected":""}>30</option>
									   <option value="40" ${pager.pageSize==40?"selected":""}>40</option>
									   <option value="50" ${pager.pageSize==50?"selected":""}>50</option>
									   <option value="70" ${pager.pageSize==70?"selected":""}>70</option>
					               </select>
					                                   条
							 </li>
						  </ul>
						</div>
                     </div>
				</td>
				<td colspan="6"></td>
			   </tr>
              </table>			  
		      </form>
             
        </div>
     </div>
</body>
</html>